<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EyeQ - Jaeger Chart Test</title>
    <link rel="icon" type="image/png" href="images/eye-q-logo.png">
    <link rel="stylesheet" href="styles/aboutStyle.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            margin: 0;
            background-color: #f4f7f6;
            color: #333;
        }

        header {
            background-color: #fff;
            border-bottom: 1px solid #eee;
            padding: 10px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo img {
            height: 40px;
        }

        nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
        }

        nav ul li {
            margin-left: 20px;
        }

        nav ul li a {
            text-decoration: none;
            color: #007bff;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        nav ul li a:hover {
            color: #0056b3;
        }

        main {
            padding: 40px 0;
        }

        main .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        h1 {
            text-align: center;
            color: #007bff;
            margin-bottom: 30px;
        }

        .test-container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            background-color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .test-title {
            text-align: center;
            color: #007bff;
            margin-bottom: 20px;
        }

        .instructions {
            background-color: #d9edf7;
            color: #31708f;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            border: 1px solid #bce8f1;
        }

        .instructions strong {
            color: #2b669a;
        }

        .instructions ul {
            list-style-type: disc;
            margin-left: 20px;
            padding: 0;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        .chart-page {
            width: 100%;
            display: none;
            text-align: center;
            padding: 20px 0;
        }

        .chart-page.active {
            display: block;
        }

        .chart-line-label {
            margin: 15px 0 5px 0;
            line-height: 1.2;
            font-weight: bold;
            font-size: 1.1rem;
            color: #0056b3;
        }
        
        .chart-sentence {
            margin: 5px 0 15px 0;
            line-height: 1.2;
            font-weight: bold;
        }

        .chart-page textarea {
            width: 80%;
            padding: 10px;
            margin-top: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1rem;
            resize: vertical;
        }

        .navigation-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .navigation-buttons button {
            padding: 10px 25px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: #fff;
            cursor: pointer;
            font-size: 1.1rem;
            transition: background-color 0.3s ease, transform 0.1s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .navigation-buttons button:hover {
            background-color: #0056b3;
            transform: translateY(-1px);
        }

        .navigation-buttons button:active {
            transform: translateY(0);
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        .navigation-buttons button.secondary {
            background-color: #6c757d;
        }

        .navigation-buttons button.secondary:hover {
            background-color: #5a6268;
        }


        .result-box {
            background-color: #6c757d;
            color: #fff;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
            transition: background-color 0.3s ease;
            margin-top: 25px;
            width: 100%;
            box-sizing: border-box;
            white-space: pre-wrap;
        }

        .result-box.success {
            background-color: #28a745;
        }
        .result-box.error {
            background-color: #dc3545;
        }

        .interpretation-section {
            background-color: #f8f9fa;
            border: 1px solid #e2e6ea;
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
            width: 100%;
            box-sizing: border-box;
        }

        .interpretation-section h3 {
            color: #007bff;
            text-align: center;
            margin-bottom: 15px;
        }

        .interpretation-section p {
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .interpretation-section ul {
            list-style-type: disc;
            margin-left: 20px;
            padding: 0;
            margin-bottom: 15px;
        }

        .interpretation-section li {
            margin-bottom: 5px;
        }

        .interpretation-section .important-note {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeeba;
            padding: 10px 15px;
            border-radius: 5px;
            font-weight: 600;
            text-align: center;
            margin-top: 20px;
        }


        footer {
            background-color: #343a40;
            color: #f8f9fa;
            padding: 20px 0;
            text-align: center;
            font-size: 0.9rem;
        }

        footer .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        footer .copyright {
            margin-bottom: 10px;
        }

        footer nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
        }

        footer nav ul li {
            margin: 0 10px;
        }

        footer nav ul li a {
            text-decoration: none;
            color: #f8f9fa;
            transition: color 0.3s ease;
        }

        footer nav ul li a:hover {
            color: #007bff;
        }
    </style>
</head>

<body>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var body = document.body;

            var header = document.createElement("header");
            var headerContainer = document.createElement("div");
            headerContainer.classList.add("container");

            var logo = document.createElement("div");
            logo.classList.add("logo");

            var logoLink = document.createElement("a");
            logoLink.href = "home1.html";

            var logoImg = document.createElement("img");
            logoImg.src = "images/eye-q-logo.png";
            logoImg.alt = "EyeQ Logo";

            logoLink.appendChild(logoImg);
            logo.appendChild(logoLink);

            var nav = document.createElement("nav");
            var ul = document.createElement("ul");

            var menuItems = ["About", "Eye Conditions", "Eye Tests", "FAQs", "Articles"];
            var links = {
                "About": "about.html",
                "Eye Conditions": "eyeConditions.html",
                "Eye Tests": "eyeTest.html",
                "FAQs": "FAQS.html",
                "Articles": "articles.html"
            };

            menuItems.forEach(function (item) {
                var li = document.createElement("li");
                var a = document.createElement("a");
                a.href = links[item] || "#";
                a.textContent = item;
                li.appendChild(a);
                ul.appendChild(li);
            });

            nav.appendChild(ul);
            headerContainer.appendChild(logo);
            headerContainer.appendChild(nav);
            header.appendChild(headerContainer);
            body.appendChild(header);

            var main = document.createElement("main");
            var mainContainer = document.createElement("div");
            mainContainer.classList.add("container");

            var h1 = document.createElement("h1");
            h1.textContent = "Near Vision Test";
            mainContainer.appendChild(h1);

            main.appendChild(mainContainer);
            body.appendChild(main);

            const testContainer = document.createElement("div");
            testContainer.classList.add("test-container");
            document.body.appendChild(testContainer);

            const title = document.createElement("h2");
            title.classList.add("test-title");
            title.textContent = "Near Vision Test (Jaeger Eye Chart)";
            testContainer.appendChild(title);

            const instructions = document.createElement("div");
            instructions.classList.add("instructions");
            instructions.innerHTML = `
                <p><strong>To perform the Jaeger Near Vision Test:</strong></p>
                <ol>
                    <li><strong>Preparation:</strong>
                        <ul>
                            <li>Ensure the room lighting is adequate and even.</li>
                            <li>Set your device's screen brightness to 100% for optimal contrast.</li>
                        </ul>
                    </li>
                    <li><strong>Positioning:</strong>
                        <ul>
                            <li>Hold the screen at a comfortable reading distance, approximately 14 inches (35 cm) away from your eyes. This is a standard reading distance.</li>
                        </ul>
                    </li>
                    <li><strong>Testing Each Eye:</strong>
                        <ul>
                            <li>Cover one eye completely with your hand or an opaque object without applying pressure to the eyelid.</li>
                            <li>Read the text on the chart aloud. Then, <strong>type the sentence you read into the text field below.</strong></li>
                            <li>Click "Submit Answer" if you believe you read it correctly, or "No, I can't read this" if you cannot.</li>
                            <li>Repeat the process for the other eye after completing the first eye.</li>
                        </ul>
                    </li>
                    <li><strong>Important:</strong> This online test is for screening purposes only and cannot replace a comprehensive eye examination by an eye care professional. If you have concerns about your vision, please consult an optometrist or ophthalmologist.</li>
                </ol>
            `;
            testContainer.appendChild(instructions);

            const jaegerSentences = [
                "Line 1: In a quiet forest, a tiny squirrel gathered nuts for winter.",
                "Line 2: The old clock chimed softly, marking the passing of time.",
                "Line 3: She painted a vibrant landscape, capturing the essence of spring.",
                "Line 4: A gentle breeze rustled through the leaves of the ancient oak.",
                "Line 5: He composed a beautiful melody, full of hope and tranquility.",
                "Line 6: The children built a magnificent sandcastle by the shimmering sea.",
                "Line 7: Sunlight filtered through the clouds, illuminating the valley.",
                "Line 8: The mystery novel kept her engrossed until the very last page.",
                "Line 9: Birds chirped sweetly from their nests high in the branches.",
                "Line 10: Every small effort contributes to a greater positive outcome.",
                "Line 11: True wisdom lies in understanding oneself and the world."
            ];

            const jaegerFontSizes = [
                24, 22, 20, 18, 16, 14, 12, 10, 8, 6, 4
            ];

            let currentLineIndex = 0;
            let currentEye = 'right';
            let rightEyeResult = 0;
            let leftEyeResult = 0;

            const chartPage = document.createElement("div");
            chartPage.classList.add("chart-page", "active");
            testContainer.appendChild(chartPage);

            const chartLineLabel = document.createElement("div");
            chartLineLabel.classList.add("chart-line-label");
            chartPage.appendChild(chartLineLabel);

            const chartSentence = document.createElement("div");
            chartSentence.classList.add("chart-sentence");
            chartPage.appendChild(chartSentence);

            const answerInput = document.createElement("textarea");
            answerInput.placeholder = "Type the sentence you read here...";
            answerInput.rows = 3;
            chartPage.appendChild(answerInput);

            const navigationButtons = document.createElement("div");
            navigationButtons.classList.add("navigation-buttons");
            testContainer.appendChild(navigationButtons);

            const submitButton = document.createElement("button");
            submitButton.textContent = "Submit Answer";
            navigationButtons.appendChild(submitButton);

            const cantReadButton = document.createElement("button");
            cantReadButton.textContent = "No, I can't read this";
            cantReadButton.classList.add("secondary");
            navigationButtons.appendChild(cantReadButton);

            const resultBox = document.createElement("div");
            resultBox.classList.add("result-box");
            resultBox.textContent = "Please cover your left eye and try to read Line 1.";
            testContainer.appendChild(resultBox);

            const jaegerPercentages = {
                1: 100, 2: 95, 3: 90, 4: 85, 5: 80,
                6: 75, 7: 70, 8: 60, 9: 50, 10: 40,
                11: 30
            };

            function updateChart() {
                answerInput.value = '';
                answerInput.focus();

                if (currentLineIndex < jaegerSentences.length) {
                    const sentenceWithLabel = jaegerSentences[currentLineIndex];
                    const labelMatch = sentenceWithLabel.match(/^(Line \d+):?\s*(.*)$/);
                    let label = `Line ${currentLineIndex + 1} (${currentEye} eye):`;
                    let sentence = sentenceWithLabel;

                    if (labelMatch && labelMatch[2]) {
                        label = `${labelMatch[1]} (${currentEye} eye):`;
                        sentence = labelMatch[2].trim();
                    } else {
                        sentence = jaegerSentences[currentLineIndex];
                    }

                    chartLineLabel.textContent = label;
                    chartSentence.textContent = sentence;
                    chartSentence.style.fontSize = `${jaegerFontSizes[currentLineIndex]}px`;
                    resultBox.textContent = `Reading Line ${currentLineIndex + 1} with your ${currentEye} eye.`;
                    resultBox.classList.remove("success", "error");
                    navigationButtons.style.display = 'flex';
                } else {
                    if (currentEye === 'right') {
                        rightEyeResult = jaegerSentences.length;
                        resultBox.textContent = `Right eye test completed. You read all lines! Now, please cover your right eye and try to read Line 1 with your left eye.`;
                        currentEye = 'left';
                        currentLineIndex = 0;
                        setTimeout(updateChart, 1000);
                    } else {
                        leftEyeResult = jaegerSentences.length;
                        displayFinalResults();
                    }
                }
            }

            function displayFinalResults() {
                navigationButtons.style.display = 'none';
                chartLineLabel.style.display = 'none';
                chartSentence.style.display = 'none';
                answerInput.style.display = 'none';

                const rightEyePercentage = jaegerPercentages[rightEyeResult] || 0;
                const leftEyePercentage = jaegerPercentages[leftEyeResult] || 0;

                resultBox.textContent = `Test Complete!\n\nRight Eye: Smallest line read: Line ${rightEyeResult} (approx. ${rightEyePercentage}% of ideal near vision)\nLeft Eye: Smallest line read: Line ${leftEyeResult} (approx. ${leftEyePercentage}% of ideal near vision)\n\nRemember, this is a self-assessment. Please consult an eye care professional for a comprehensive examination.`;
                resultBox.classList.add("success");
                resultBox.classList.remove("error");
            }

            submitButton.addEventListener("click", () => {
                const userAnswer = answerInput.value.trim().toLowerCase();
                const correctSentenceWithLabel = jaegerSentences[currentLineIndex];
                const correctSentenceMatch = correctSentenceWithLabel.match(/^(Line \d+):?\s*(.*)$/);
                const correctSentence = correctSentenceMatch && correctSentenceMatch[2] ? correctSentenceMatch[2].trim().toLowerCase() : correctSentenceWithLabel.trim().toLowerCase();


                if (userAnswer === correctSentence) {
                    resultBox.textContent = `Correct! Advancing to the next line.`;
                    resultBox.classList.add("success");
                    resultBox.classList.remove("error");
                    currentLineIndex++;
                    setTimeout(updateChart, 1000);
                } else {
                    resultBox.textContent = `Incorrect. Please check your spelling or try again. If you truly cannot read it, click "No, I can't read this".`;
                    resultBox.classList.add("error");
                    resultBox.classList.remove("success");
                }
            });

            cantReadButton.addEventListener("click", () => {
                if (currentEye === 'right') {
                    rightEyeResult = currentLineIndex + 1;
                    resultBox.textContent = `Right eye test completed. Smallest line read: Line ${currentLineIndex + 1}. Now, please cover your right eye and try to read Line 1 with your left eye.`;
                    currentEye = 'left';
                    currentLineIndex = 0;
                    setTimeout(updateChart, 1000);
                } else {
                    leftEyeResult = currentLineIndex + 1;
                    displayFinalResults();
                }
            });

            updateChart();


            const interpretationSection = document.createElement("div");
            interpretationSection.classList.add("interpretation-section");
            interpretationSection.innerHTML = `
                <h3>Interpretation of Results</h3>
                <p>The Jaeger eye chart assesses your near vision, which is your ability to see objects clearly at a close distance. The chart presents text in various sizes, with smaller line numbers (e.g., Line 1, Line 2) corresponding to smaller text and better near vision.</p>
                <ul>
                    <li><strong>Line 1 - Line 3:</strong> Indicates excellent to very good near vision. You can comfortably read very fine print, similar to newspaper or standard book text.</li>
                    <li><strong>Line 4 - Line 6:</strong> Good near vision. You can read most common print sizes without significant difficulty.</li>
                    <li><strong>Line 7 - Line 9:</strong> Moderate near vision. You may start to notice some blurriness with smaller print and might benefit from reading glasses or a stronger prescription.</li>
                    <li><strong>Line 10 - Line 11:</strong> Poor near vision. You will likely struggle with most reading tasks and may require significant vision correction to read comfortably.</li>
                </ul>
                <p class="important-note">
                    <strong>Disclaimer:</strong> This online Jaeger chart test is a self-assessment tool and should not be used as a substitute for a professional eye examination. Only a qualified eye care professional can accurately diagnose vision problems and provide appropriate treatment. If you have any concerns about your near vision or overall eye health, please schedule an appointment with an optometrist or ophthalmologist.
                </p>
            `;
            testContainer.appendChild(interpretationSection);


            var footer = document.createElement("footer");
            var footerContainer = document.createElement("div");
            footerContainer.classList.add("container");

            var copyright = document.createElement("div");
            copyright.classList.add("copyright");
            copyright.textContent = "© EyeQ 2025 all rights reserved. |";

            var footerNav = document.createElement("nav");
            var footerUl = document.createElement("ul");
            var footerItems = [
                { text: "Privacy |", link: "privacy.html" },
                { text: "Terms |", link: "terms.html" },
                { text: "Contact", link: "contact.html" }
            ];

            footerItems.forEach(function (item) {
                var li = document.createElement("li");
                var a = document.createElement("a");
                a.href = item.link;
                a.textContent = item.text;
                li.appendChild(a);
                footerUl.appendChild(li);
            });

            footerNav.appendChild(footerUl);
            footerContainer.appendChild(copyright);
            footerContainer.appendChild(footerNav);
            footer.appendChild(footerContainer);
            body.appendChild(footer);
        });
    </script>

</body>

</html>